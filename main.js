(()=>{"use strict";const e=(()=>{let e=0;function t(e,t){for(var r in t)e.setAttribute(r,t[r])}const r=(e,t,r)=>{e.insertBefore(t,r)};function n(e,t){return 0===t?e:n(e.parentNode,t-1)}return{assembleTask:r=>{let n=document.createElement("li");n.setAttribute("id","id"+e),e++,function(e){for(var t in e){if("id"===t)continue;let a=document.createElement("div");a.setAttribute("class",t),r(a,t,e),n.append(a)}function r(e,t,r){if("title"===t||"descript"===t)e.textContent=r[t];else if("duedate"===t){let t=document.createElement("label");t.setAttribute("for","date"),t.textContent="Due Date: ";let r=l();e.append(t,r)}else if("priority"===t){e.classList.add(r[t]);let n=function(){let e=document.createElement("button");return e.setAttribute("type","button"),e}();e.append(n)}}}(r);let a=l("container"),o=function(){let e=document.createElement("label"),r=document.createElement("input"),n=document.createElement("span");return t(r,{type:"checkbox",checked:"checked"}),n.setAttribute("class","checkmark"),e.append(r,n),e}();return a.append(o),n.append(a),n;function l(e=""){let t=document.createElement("div");return e&&t.setAttribute("class",e),t}},insertNode:r,deleteTask:e=>{n(e,3).remove()},removeAllChildNodes:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},makeDateInput:function(){let e=document.createElement("input");return t(e,{type:"date",name:"date",id:"date"}),e},getNthParent:n,toggleShadow:(e,t)=>{t.classList.contains("normal")?(t.classList.remove("normal"),e.classList.add("shadow")):(t.classList.add("normal"),e.classList.remove("shadow"))},appendTextNode:e=>{let n=e.target,a=document.createElement("input");t(a,{type:"text",id:"name",name:"name",minlength:"1",maxlength:"15",placeholder:"Enter to save"});let o=n.parentNode;return r(o,a,n),[o.removeChild(n),a]},appendTextContent:(e,t)=>{let n=t.target,a=t.target.parentNode;e.textContent=n.value,r(a,e,n),n.remove()}}})(),t=(()=>{const e=()=>{let e=JSON.parse(localStorage.getItem("projectTaskArr"));return e||(e=[]),e},t=(e,t)=>e.findIndex((e=>e.id===t));return{retrieveStorage:e,setStorage:t=>{let r=e();r.push(t),localStorage.setItem("projectTaskArr",JSON.stringify(r))},showStorage:()=>{let e=JSON.parse(localStorage.getItem("projectTaskArr"));console.log(e)},updateID:(t,r)=>{let n=e(),a=t.id;r.id=a,n.push(r),localStorage.setItem("projectTaskArr",JSON.stringify(n))},removeByID:r=>{let n=e(),a=t(n,r),o=[...n.slice(0,a),...n.slice(a+1)];localStorage.setItem("projectTaskArr",JSON.stringify(o))},updateVal:(r,n,a)=>{let o=e();o[t(o,r)][a]=n?"normal":"high",localStorage.setItem("projectTaskArr",JSON.stringify(o))}}})();localStorage.clear(),(()=>{document.querySelector(".title");const r=document.querySelector(".tasklist"),n=document.querySelector(".newtask");function a(t){let r=e.appendTextNode(t),n=r[0];r[1].addEventListener("keypress",(function(t){"Enter"===t.key&&e.appendTextContent(n,t)}))}function o(t){let r=t.target.parentNode;e.removeAllChildNodes(r),r.append(e.makeDateInput()),t.target.removeEventListener("click",o)}function l(r){let n=e.getNthParent(r.target,2);e.toggleShadow(n,r.target.parentNode);let a=r.target.parentNode.classList[1];t.updateVal(n.id,a,"priority"),t.showStorage()}function i(r){let n=e.getNthParent(r.target,3);t.removeByID(n.id),e.deleteTask(r.target),t.showStorage()}document.querySelectorAll(".duedate div");n.addEventListener("click",(function(){let c=((e="",t="Title",r="Description",n="",a="normal")=>({id:e,title:t,descript:r,duedate:n,priority:a}))(),d=e.assembleTask(c);e.insertNode(r,d,n),(e=>{function t(e){e.addEventListener("click",a)}t(e.querySelector(".title")),t(e.querySelector(".descript")),e.querySelector(".duedate div").addEventListener("click",o),e.querySelector(".priority button").addEventListener("click",l),e.querySelector(".container label input").addEventListener("change",i)})(d),t.updateID(d,c)}))})()})();